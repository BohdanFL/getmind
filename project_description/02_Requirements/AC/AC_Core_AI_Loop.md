### Картка: Core AI Interaction Loop (PDF -> Question -> Feedback)

#### 1. Етап: Обробка та Retrieval (Доступ до знань)
- [ ] **AC 1.1:** Система успішно розбиває PDF на семантичні фрагменти (chunks) обсягом 500-1000 символів, зберігаючи посилання на номер сторінки.
- [ ] **AC 1.2:** При запиті до ШІ система передає **тільки** контекст поточного та попереднього фрагментів (щоб уникнути галюцинацій та змішування тем).
- [ ] **AC 1.3:** ШІ ігнорує будь-яку зовнішню інформацію, яка не міститься у завантаженому документі (Strict RAG mode).

#### 2. Етап: Генерація "Socratic Question" (Active Recall)
- [ ] **AC 2.1:** Питання, що генерується, є **відкритого типу** (потребує пояснення, а не відповіді "так/ні" або вибору варіанту).
- [ ] **AC 2.2:** Питання змушує користувача провести **елаборацію** (наприклад: "Як ви за допомогою принципу X можете пояснити ситуацію Y?", а не просто "Що таке X?").
- [ ] **AC 2.3:** (Risk Control): ШІ ні за яких умов не видає правильну відповідь у самому запитанні.

#### 3. Етап: Семантичне оцінювання (Semantic Grading)
- [ ] **AC 3.1:** Система розрізняє "правильну відповідь" і "правильну відповідь, скопійовану з тексту" (Анти-копіпаст).
- [ ] **AC 3.2:** ШІ зараховує відповідь як правильну, якщо вона **синонімічна** за змістом, навіть якщо учень не використав термінологію з підручника (перевірка розуміння суті).
- [ ] **AC 3.3:** Фідбек на помилкову відповідь містить не саму відповідь, а підказку, на який абзац тексту варто звернути увагу, щоб знайти рішення самостійно.

#### 4. Етап: Технічна стабільність (Performance)
- [ ] **AC 4.1:** Час очікування відповіді від ШІ на етапі оцінювання не перевищує 5-7 секунд (щоб не розривати стан потоку учня).
- [ ] **AC 4.2:** Система зберігає історію спроб (лога): "Питання - Відповідь - Оцінка ШІ", що дозволяє провести ручну верифікацію точності ШІ в майбутньому.